<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/halchemy/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/halchemy/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(1)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(1) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(1) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list { display: block; } </style> <script src="/halchemy/assets/js/vendor/lunr.min.js"></script> <script src="/halchemy/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/halchemy/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Default Headers | halchemy</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Default Headers" /> <meta name="author" content="Michael Ottoson" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A simple but powerful library for consuming HAL based APIs. Create an Api object with the URL to the API, then with a simple approach follow the links from resource to resource, and access each affordance. Optimized for developer convenience without sacrificing fine-grained control. An excellent client library for use with hypermea based APIs. Each supported language follows idiomatic conventions." /> <meta property="og:description" content="A simple but powerful library for consuming HAL based APIs. Create an Api object with the URL to the API, then with a simple approach follow the links from resource to resource, and access each affordance. Optimized for developer convenience without sacrificing fine-grained control. An excellent client library for use with hypermea based APIs. Each supported language follows idiomatic conventions." /> <link rel="canonical" href="http://0.0.0.0:4000/halchemy/headers/default" /> <meta property="og:url" content="http://0.0.0.0:4000/halchemy/headers/default" /> <meta property="og:site_name" content="halchemy" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Default Headers" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Michael Ottoson"},"description":"A simple but powerful library for consuming HAL based APIs. Create an Api object with the URL to the API, then with a simple approach follow the links from resource to resource, and access each affordance. Optimized for developer convenience without sacrificing fine-grained control. An excellent client library for use with hypermea based APIs. Each supported language follows idiomatic conventions.","headline":"Default Headers","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/halchemy/assets/img/halchemy.png"},"name":"Michael Ottoson"},"url":"http://0.0.0.0:4000/halchemy/headers/default"}</script> <!-- End Jekyll SEO tag --> <link rel="stylesheet" href="/halchemy/assets/css/tab-styles.css"> <script src="/halchemy/assets/js/tabs.js"></script> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Default Headers | halchemy</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Default Headers" /> <meta name="author" content="Michael Ottoson" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A simple but powerful library for consuming HAL based APIs. Create an Api object with the URL to the API, then with a simple approach follow the links from resource to resource, and access each affordance. Optimized for developer convenience without sacrificing fine-grained control. An excellent client library for use with hypermea based APIs. Each supported language follows idiomatic conventions." /> <meta property="og:description" content="A simple but powerful library for consuming HAL based APIs. Create an Api object with the URL to the API, then with a simple approach follow the links from resource to resource, and access each affordance. Optimized for developer convenience without sacrificing fine-grained control. An excellent client library for use with hypermea based APIs. Each supported language follows idiomatic conventions." /> <link rel="canonical" href="http://0.0.0.0:4000/halchemy/headers/default" /> <meta property="og:url" content="http://0.0.0.0:4000/halchemy/headers/default" /> <meta property="og:site_name" content="halchemy" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Default Headers" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Michael Ottoson"},"description":"A simple but powerful library for consuming HAL based APIs. Create an Api object with the URL to the API, then with a simple approach follow the links from resource to resource, and access each affordance. Optimized for developer convenience without sacrificing fine-grained control. An excellent client library for use with hypermea based APIs. Each supported language follows idiomatic conventions.","headline":"Default Headers","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/halchemy/assets/img/halchemy.png"},"name":"Michael Ottoson"},"url":"http://0.0.0.0:4000/halchemy/headers/default"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/halchemy/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="halchemy"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in The Basics category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/halchemy/basics/" class="nav-list-link">The Basics</a><ul class="nav-list"><li class="nav-list-item"><a href="/halchemy/basics/examples" class="nav-list-link">Examples</a></li><li class="nav-list-item"><a href="/halchemy/basics/terms" class="nav-list-link">Key Terms</a></li></ul></li><li class="nav-list-item"><a href="/halchemy/configuration/" class="nav-list-link">Configuration</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Request Headers category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/halchemy/headers/" class="nav-list-link">Request Headers</a><ul class="nav-list"><li class="nav-list-item"><a href="/halchemy/headers/default" class="nav-list-link">Default Headers</a></li><li class="nav-list-item"><a href="/halchemy/headers/per_request" class="nav-list-link">Per Request Headers</a></li></ul></li><li class="nav-list-item"><a href="/halchemy/parameters/" class="nav-list-link">Query String Parameters</a></li><li class="nav-list-item"><a href="/halchemy/templates/" class="nav-list-link">Templated Links</a></li><li class="nav-list-item"><a href="/halchemy/concurrency/" class="nav-list-link">Optimistic Concurrency</a></li><li class="nav-list-item"><a href="/halchemy/errors/" class="nav-list-link">Handling Errors</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Deprecated API category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/halchemy/deprecated/" class="nav-list-link">Deprecated API</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Methods category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/halchemy/deprecated/methods/" class="nav-list-link">Methods</a><ul class="nav-list"><li class="nav-list-item"> <a href="/halchemy/methods/get" class="nav-list-link">GET</a> </li><li class="nav-list-item"> <a href="/halchemy/deprecated/methods/get_from_rel" class="nav-list-link">GET from rel</a> </li><li class="nav-list-item"> <a href="/halchemy/deprecated/methods/post_to_rel" class="nav-list-link">POST to rel</a> </li><li class="nav-list-item"> <a href="/halchemy/deprecated/methods/delete_resource" class="nav-list-link">DELETE resource</a> </li><li class="nav-list-item"> <a href="/halchemy/deprecated/methods/patch_resource" class="nav-list-link">PATCH resource</a> </li><li class="nav-list-item"> <a href="/halchemy/deprecated/methods/put_to_rel" class="nav-list-link">PUT to rel</a> </li><li class="nav-list-item"> <a href="/halchemy/deprecated/methods/get_from_rel_with_lookup" class="nav-list-link">GET from rel with lookup</a> </li><li class="nav-list-item"> <a href="/halchemy/deprecated/methods/post_to_url" class="nav-list-link">POST to URL</a> </li><li class="nav-list-item"> <a href="/halchemy/deprecated/methods/delete_url" class="nav-list-link">DELETE URL</a> </li><li class="nav-list-item"> <a href="/halchemy/deprecated/methods/url_from_rel" class="nav-list-link">URL from rel</a> </li></ul></li><li class="nav-list-item"><a href="/halchemy/deprecated/errors" class="nav-list-link">Handling Errors</a></li><li class="nav-list-item"><a href="/halchemy/deprecated/headers" class="nav-list-link">Request Headers</a></li><li class="nav-list-item"><a href="/halchemy/deprecated/parameters" class="nav-list-link">Query String Parameters</a></li><li class="nav-list-item"><a href="/halchemy/deprecated/templates" class="nav-list-link">Templated Links</a></li><li class="nav-list-item"><a href="/halchemy/deprecated/concurrency" class="nav-list-link">Optimistic Concurrency</a></li></ul></li></ul> </nav> <p class="version-number">Version 1.0.1</p> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search halchemy" aria-label="Search halchemy" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/halchemy/headers/">Request Headers</a></li> <li class="breadcrumb-nav-list-item"><span>Default Headers</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="default-headers"> <a href="#default-headers" class="anchor-heading" aria-labelledby="default-headers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default Headers </h1> <p>Each Api object carries a set of default headers. These are the headers that are sent with every request (unless overridden for any given request).</p> <blockquote> <p>Note: the underlying http library used by halchemy has its default headers too. You can override them, but you cannot directly access or remove them using halchemy.</p> </blockquote> <ul> <li><a href="#the-default-headers">The default headers</a></li> <li><a href="#setting-the-default-headers">Setting the default headers</a> <ul> <li><a href="#using-a-configuration-file">Using a configuration file</a></li> <li><a href="#using-the-api-constructor">Using the <code class="language-plaintext highlighter-rouge">Api</code> constructor</a></li> <li><a href="#using-the-api-object">Using the <code class="language-plaintext highlighter-rouge">Api</code> object</a></li> </ul> </li> </ul> <h2 id="the-default-headers"> <a href="#the-default-headers" class="anchor-heading" aria-labelledby="the-default-headers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The default headers </h2> <p>Out of the box, the set of default headers is:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Content-type: application/json
Accept: application/hal+json, application/json;q=0.9, */*;q=0
Authorization: Basic cm9vdDpwYXNzd29yZA==
</code></pre></div></div> <h3 id="content-type"> <a href="#content-type" class="anchor-heading" aria-labelledby="content-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">Content-type</code> </h3> <p>As halchemy is designed to work with APIs that use HAL, the default <code class="language-plaintext highlighter-rouge">Content-type</code> is <code class="language-plaintext highlighter-rouge">application/json</code> on the assumption that any data you send to the API will be JSON.</p> <h3 id="accept"> <a href="#accept" class="anchor-heading" aria-labelledby="accept"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">Accept</code> </h3> <p>This configures halchemy to prefer HAL JSON, accept any JSON, and not to accept any other type of data. You can use change this so halchemy will work with non JSON data, but since it is tuned for HAL / JSON you will not benefit from some of the automation provided by halchemy. Rest assured, you can fully utilize your API with other types of content.</p> <h3 id="authorization"> <a href="#authorization" class="anchor-heading" aria-labelledby="authorization"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">Authorization</code> </h3> <p>This configures halchemy to use Basic authentication. The token is the base64 encoding of <code class="language-plaintext highlighter-rouge">root:password</code>. This is convenient if you are using an auth-enabled halchemy API in a certain developer configuration. You will, of course, want to change the <code class="language-plaintext highlighter-rouge">Authorization</code> header the requirements of the API you are using. You can ignore this header if your API does not require authorization.</p> <p>If your API uses OAuth, for example, you would change the default <code class="language-plaintext highlighter-rouge">Authorization</code> header to something like:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxIiwiaWF0IjoyfQ.nMoAK-oiZTdVT0CcGhgS5yCscaNSf49BYFR3DiGT3tM
</code></pre></div></div> <h2 id="setting-the-default-headers"> <a href="#setting-the-default-headers" class="anchor-heading" aria-labelledby="setting-the-default-headers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting the default headers </h2> <p>There are four ways to set or change the default headers:</p> <ol> <li>Place a file named <code class="language-plaintext highlighter-rouge">.halchemy</code> in your home directory, containing headers</li> <li>Place a file named <code class="language-plaintext highlighter-rouge">.halchemy</code> in your project’s root directory, containing headers</li> <li>Pass default headers to the <code class="language-plaintext highlighter-rouge">Api</code> constructor</li> <li>Use Api object’s properties and methods to change the headers</li> </ol> <p>These are listed in order of priority. That is, the headers in the home directory’s <code class="language-plaintext highlighter-rouge">.halchemy</code> file will be overridden by the headers in the project’s root directory’s <code class="language-plaintext highlighter-rouge">.halchemy</code> file, and so on down the list.</p> <h3 id="using-a-configuration-file"> <a href="#using-a-configuration-file" class="anchor-heading" aria-labelledby="using-a-configuration-file"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using a configuration file </h3> <p>The <code class="language-plaintext highlighter-rouge">.halchemy</code> file goes either in your home directory, or in your project root directory. If in both, the one in your project root takes precedence and the one in your home directory is ignored.</p> <p>Set default headers in this file under the <code class="language-plaintext highlighter-rouge">headers</code> section, in INI format:</p> <div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[headers]</span>
<span class="py">Content-type</span> <span class="p">=</span> <span class="s">application/xml</span>
<span class="py">Authorization</span> <span class="p">=</span> <span class="s">eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxIiwiaWF0IjoyfQ.nMoAK-oiZTdVT0CcGhgS5yCscaNSf49BYFR3DiGT3tM</span>
<span class="py">Cache-control</span> <span class="p">=</span> <span class="s">no-cache</span>
</code></pre></div></div> <blockquote> <p>Please see <a href="/configuration/#configuration-file">Configuration File</a> for full details on the <code class="language-plaintext highlighter-rouge">.halchemy</code> file.</p> </blockquote> <p>Headers in the <code class="language-plaintext highlighter-rouge">.halchemy</code> file are merged with the out-of-the-box default headers. The <code class="language-plaintext highlighter-rouge">.halchemy</code> file above would result in the following default headers:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Content-type: application/xml
Authorization: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxIiwiaWF0IjoyfQ.nMoAK-oiZTdVT0CcGhgS5yCscaNSf49BYFR3DiGT3tM
Cache-control: no-cache
Accept: application/hal+json, application/json;q=0.9, */*;q=0
</code></pre></div></div> <ul> <li>The <code class="language-plaintext highlighter-rouge">Content-type</code> header is changed to <code class="language-plaintext highlighter-rouge">application/xml</code></li> <li>The <code class="language-plaintext highlighter-rouge">Authorization</code> header is changed to that JWT token</li> <li>The <code class="language-plaintext highlighter-rouge">Cache-control</code> header is added</li> <li>The ‘Accept’ header remains the same</li> </ul> <h3 id="using-the-api-constructor"> <a href="#using-the-api-constructor" class="anchor-heading" aria-labelledby="using-the-api-constructor"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the <code class="language-plaintext highlighter-rouge">Api</code> Constructor </h3> <p>The constructor takes two parameters: base url and headers. Here is an example of setting the default headers using the constructor:</p> <ul id="example1" class="tab" data-tab="d4c971ed-7840-4bc5-b4be-1c9f4eb1d094" data-name="example1"> <li class="active" id="example1-python"> <a href="#">Python </a> </li> <li id="example1-javascript"> <a href="#">JavaScript </a> </li> </ul> <ul class="tab-content" id="d4c971ed-7840-4bc5-b4be-1c9f4eb1d094" data-name="example1"> <li class="active"> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">api</span> <span class="o">=</span> <span class="nc">Api</span><span class="p">(</span><span class="sh">'</span><span class="s">http://example.org/api</span><span class="sh">'</span><span class="p">,</span> <span class="p">{</span><span class="sh">'</span><span class="s">Accept</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">application/xml</span><span class="sh">'</span><span class="p">})</span>
</code></pre></div></div> <p>If you do not want to specify a base URL, you can use Python’s named parameters, like this:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">api</span> <span class="o">=</span> <span class="nc">Api</span><span class="p">(</span><span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">Accept</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">application/xml</span><span class="sh">'</span><span class="p">})</span>
</code></pre></div></div> </li> <li> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Api</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://example.org/api</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/xml</span><span class="dl">'</span><span class="p">})</span>
</code></pre></div></div> <p>If you do not want to specify a base URL, you can pass <code class="language-plaintext highlighter-rouge">undefined</code> as the first parameter, like this:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Api</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/xml</span><span class="dl">'</span><span class="p">})</span>
</code></pre></div></div> </li> </ul> <blockquote> <p>The example above only sets one header. You can set as many headers as you like in the dictionary/object passed to the constructor.</p> </blockquote> <p>Like the <code class="language-plaintext highlighter-rouge">.halchemy</code> file, the headers passed to the constructor are merged with the out-of-the-box default headers.</p> <h3 id="using-the-api-object"> <a href="#using-the-api-object" class="anchor-heading" aria-labelledby="using-the-api-object"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the <code class="language-plaintext highlighter-rouge">Api</code> Object </h3> <p>There are three ways to use the <code class="language-plaintext highlighter-rouge">Api</code> object to manipulate the default headers:</p> <ul> <li>the <code class="language-plaintext highlighter-rouge">headers</code> property</li> <li>the <code class="language-plaintext highlighter-rouge">add headers</code> method</li> <li>the <code class="language-plaintext highlighter-rouge">remove headers</code> method</li> </ul> <h4 id="the-headers-property"> <a href="#the-headers-property" class="anchor-heading" aria-labelledby="the-headers-property"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The headers property </h4> <p>This property replaces the default headers with the headers you provide. Here is an example:</p> <ul id="example1" class="tab" data-tab="f2a3a502-3581-494d-a357-ee5265fd17c6" data-name="example1"> <li class="active" id="example1-python"> <a href="#">Python </a> </li> <li id="example1-javascript"> <a href="#">JavaScript </a> </li> </ul> <ul class="tab-content" id="f2a3a502-3581-494d-a357-ee5265fd17c6" data-name="example1"> <li class="active"> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">api</span> <span class="o">=</span> <span class="nc">Api</span><span class="p">()</span>

<span class="n">api</span><span class="p">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="sh">'</span><span class="s">Cache-control</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">no-cache</span><span class="sh">'</span><span class="p">,</span>
  <span class="sh">'</span><span class="s">Accept-language</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Accept-Language: en-CA, en;q=0.9, fr-CA;q=0.8, fr;q=0.7</span><span class="sh">'</span><span class="p">,</span>
  <span class="sh">'</span><span class="s">Authorization</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxIiwiaWF0IjoyfQ.nMoAK-oiZTdVT0CcGhgS5yCscaNSf49BYFR3DiGT3tM</span><span class="sh">'</span>
<span class="p">}</span>
</code></pre></div></div> </li> <li> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Api</span><span class="p">()</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">Cache-control</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">no-cache</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Accept-language</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Accept-Language: en-CA, en;q=0.9, fr-CA;q=0.8, fr;q=0.7</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxIiwiaWF0IjoyfQ.nMoAK-oiZTdVT0CcGhgS5yCscaNSf49BYFR3DiGT3tM</span><span class="dl">'</span>
<span class="p">}</span>
</code></pre></div></div> </li> </ul> <p>This has the following results:</p> <ul> <li>the <code class="language-plaintext highlighter-rouge">Content-type</code> and <code class="language-plaintext highlighter-rouge">Accept</code> headers are removed from the <code class="language-plaintext highlighter-rouge">Api</code> object’s default headers</li> <li>the <code class="language-plaintext highlighter-rouge">Cache-control</code> and <code class="language-plaintext highlighter-rouge">Accept-language</code> headers are added</li> <li>the <code class="language-plaintext highlighter-rouge">Authorization</code> header’s value is replaced with the bearer token</li> </ul> <h4 id="the-add-headers-method"> <a href="#the-add-headers-method" class="anchor-heading" aria-labelledby="the-add-headers-method"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The add headers method </h4> <p>This method adds headers to the default headers. If the header you are adding already exists, it is replaced. Here is an example:</p> <ul id="example2" class="tab" data-tab="10dd4148-cf7a-4844-aeb9-cb39cbdf43db" data-name="example2"> <li class="active" id="example2-python"> <a href="#">Python </a> </li> <li id="example2-javascript"> <a href="#">JavaScript </a> </li> </ul> <ul class="tab-content" id="10dd4148-cf7a-4844-aeb9-cb39cbdf43db" data-name="example2"> <li class="active"> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">api</span> <span class="o">=</span> <span class="nc">Api</span><span class="p">()</span>
<span class="n">api</span><span class="p">.</span><span class="nf">add_headers</span><span class="p">({</span>
    <span class="sh">'</span><span class="s">Cache-control</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">no-cache</span><span class="sh">'</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">Accept-language</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">en-CA, en;q=0.9, fr-CA;q=0.8, fr;q=0.7</span><span class="sh">'</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">Authorization</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxIiwiaWF0IjoyfQ.nMoAK-oiZTdVT0CcGhgS5yCscaNSf49BYFR3DiGT3tM</span><span class="sh">'</span>
<span class="p">})</span>
</code></pre></div></div> </li> <li> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Api</span><span class="p">()</span>
<span class="nx">api</span><span class="p">.</span><span class="nf">addHeaders</span><span class="p">({</span>
    <span class="dl">'</span><span class="s1">Cache-control</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">no-cache</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Accept-language</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">en-CA, en;q=0.9, fr-CA;q=0.8, fr;q=0.7</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxIiwiaWF0IjoyfQ.nMoAK-oiZTdVT0CcGhgS5yCscaNSf49BYFR3DiGT3tM</span><span class="dl">'</span>
<span class="p">})</span>
</code></pre></div></div> </li> </ul> <p>Now the default headers are have the two new ones (<code class="language-plaintext highlighter-rouge">Cache-control</code> and <code class="language-plaintext highlighter-rouge">Accept-language</code>) and the <code class="language-plaintext highlighter-rouge">Authorization</code> header’s value is replaced with the bearer token.</p> <h4 id="the-remove-headers-method"> <a href="#the-remove-headers-method" class="anchor-heading" aria-labelledby="the-remove-headers-method"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The remove headers method </h4> <p>This method removes headers from the default headers. If the header you are removing does not exist, it is ignored. Here is an example:</p> <ul id="example3" class="tab" data-tab="fd76f3ad-5829-4160-ac3f-a5fe67dc4296" data-name="example3"> <li class="active" id="example3-python"> <a href="#">Python </a> </li> <li id="example3-javascript"> <a href="#">JavaScript </a> </li> </ul> <ul class="tab-content" id="fd76f3ad-5829-4160-ac3f-a5fe67dc4296" data-name="example3"> <li class="active"> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">api</span> <span class="o">=</span> <span class="nc">Api</span><span class="p">()</span>
<span class="n">api</span><span class="p">.</span><span class="nf">remove_headers</span><span class="p">([</span><span class="sh">'</span><span class="s">Authorization</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Accept</span><span class="sh">'</span><span class="p">])</span>
</code></pre></div></div> </li> <li> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Api</span><span class="p">()</span>
<span class="nx">api</span><span class="p">.</span><span class="nf">removeHeaders</span><span class="p">([</span><span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Accept</span><span class="dl">'</span><span class="p">])</span>
</code></pre></div></div> </li> </ul> <blockquote> <p>NOTE: removing the <code class="language-plaintext highlighter-rouge">Accept</code> header only removes it from the default headers of the <code class="language-plaintext highlighter-rouge">Api</code> object. This lets the underlying http library use its default <code class="language-plaintext highlighter-rouge">Accept</code> header.</p> </blockquote> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
