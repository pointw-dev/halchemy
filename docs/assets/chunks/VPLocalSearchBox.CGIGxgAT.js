var Le=Object.defineProperty;var De=(f,o,r)=>o in f?Le(f,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):f[o]=r;var W=(f,o,r)=>(De(f,typeof o!="symbol"?o+"":o,r),r);import{d as Me,D as K,aq as de,f as F,r as A,ar as Ee,as as Ae,m as Ie,l as he,at as Be,g as X,Q as I,P as N,au as Pe,av as Re,W as Ve,X as Ce,a3 as $e,o as x,c as He,h as a,a0 as Oe,i as n,B as Ke,aw as Fe,ax as Ne,a as T,A as ve,b as q,z as pe,F as fe,J as B,t as P,ay as qe,p as ze,j as Ue,az as me,aA as je,af as Qe,al as Je,V as We,aD as Xe,_ as Ge}from"./framework.Bu-ijBxq.js";import{l as Ye,u as Ze,M as et,a as tt}from"./index.RmnBMhle.js";import{a as at,b as st}from"./theme.BQ0FLWZE.js";class lt{constructor(o=10){W(this,"max");W(this,"cache");this.max=o,this.cache=new Map}get(o){let r=this.cache.get(o);return r!==void 0&&(this.cache.delete(o),this.cache.set(o,r)),r}set(o,r){this.cache.has(o)?this.cache.delete(o):this.cache.size===this.max&&this.cache.delete(this.first()),this.cache.set(o,r)}first(){return this.cache.keys().next().value}clear(){this.cache.clear()}}const _=f=>(ze("data-v-43c4f204"),f=f(),Ue(),f),ot=["aria-owns"],nt={class:"shell"},rt=["title"],it=_(()=>a("span",{"aria-hidden":"true",class:"vpi-search search-icon local-search-icon"},null,-1)),ct=[it],ut={class:"search-actions before"},dt=["title"],ht=_(()=>a("span",{class:"vpi-arrow-left local-search-icon"},null,-1)),vt=[ht],pt=["placeholder"],ft={class:"search-actions"},mt=["title"],_t=_(()=>a("span",{class:"vpi-layout-list local-search-icon"},null,-1)),bt=[_t],gt=["disabled","title"],wt=_(()=>a("span",{class:"vpi-delete local-search-icon"},null,-1)),yt=[wt],xt=["id","role","aria-labelledby"],kt=["aria-selected"],Tt=["href","aria-label","onMouseenter","onFocusin"],St={class:"titles"},Lt=_(()=>a("span",{class:"title-icon"},"#",-1)),Dt=["innerHTML"],Mt=_(()=>a("span",{class:"vpi-chevron-right local-search-icon"},null,-1)),Et={class:"title main"},At=["innerHTML"],It={key:0,class:"excerpt-wrapper"},Bt={key:0,class:"excerpt",inert:""},Pt=["innerHTML"],Rt=_(()=>a("div",{class:"excerpt-gradient-bottom"},null,-1)),Vt=_(()=>a("div",{class:"excerpt-gradient-top"},null,-1)),Ct={key:0,class:"no-results"},$t={class:"search-keyboard-shortcuts"},Ht=["aria-label"],Ot=_(()=>a("span",{class:"vpi-arrow-up navigate-icon"},null,-1)),Kt=[Ot],Ft=["aria-label"],Nt=_(()=>a("span",{class:"vpi-arrow-down navigate-icon"},null,-1)),qt=[Nt],zt=["aria-label"],Ut=_(()=>a("span",{class:"vpi-corner-down-left navigate-icon"},null,-1)),jt=[Ut],Qt=["aria-label"],Jt=Me({__name:"VPLocalSearchBox",emits:["close"],setup(f,{emit:o}){var ae,se;const r=o,z=K(),R=K(),_e=K(Ye),V=at(),{activate:be}=Ze(z,{immediate:!0,allowOutsideClick:!0,clickOutsideDeactivates:!0,escapeDeactivates:!0}),{localeIndex:G,theme:c}=V,ge=de(async()=>{var e,t,l,v,b,d,s,h,w;return me(et.loadJSON((l=await((t=(e=_e.value)[G.value])==null?void 0:t.call(e)))==null?void 0:l.default,{fields:["title","titles","text"],storeFields:["title","titles"],searchOptions:{fuzzy:.2,prefix:!0,boost:{title:4,text:2,titles:1},...((v=c.value.search)==null?void 0:v.provider)==="local"&&((d=(b=c.value.search.options)==null?void 0:b.miniSearch)==null?void 0:d.searchOptions)},...((s=c.value.search)==null?void 0:s.provider)==="local"&&((w=(h=c.value.search.options)==null?void 0:h.miniSearch)==null?void 0:w.options)}))}),g=F(()=>{var e,t;return((e=c.value.search)==null?void 0:e.provider)==="local"&&((t=c.value.search.options)==null?void 0:t.disableQueryPersistence)===!0}).value?A(""):Ee("vitepress:local-search-filter",""),M=Ae("vitepress:local-search-detailed-list",((ae=c.value.search)==null?void 0:ae.provider)==="local"&&((se=c.value.search.options)==null?void 0:se.detailedView)===!0),Y=F(()=>{var e,t,l;return((e=c.value.search)==null?void 0:e.provider)==="local"&&(((t=c.value.search.options)==null?void 0:t.disableDetailedView)===!0||((l=c.value.search.options)==null?void 0:l.detailedView)===!1)}),Z=F(()=>{var t,l,v,b,d,s,h;const e=((t=c.value.search)==null?void 0:t.options)??c.value.algolia;return((d=(b=(v=(l=e==null?void 0:e.locales)==null?void 0:l[G.value])==null?void 0:v.translations)==null?void 0:b.button)==null?void 0:d.buttonText)||((h=(s=e==null?void 0:e.translations)==null?void 0:s.button)==null?void 0:h.buttonText)||"Search"});Ie(()=>{Y.value&&(M.value=!1)});const i=K([]),U=A(!1);he(g,()=>{U.value=!1});const ee=de(async()=>{if(R.value)return me(new tt(R.value))},null),C=new lt(16);Be(()=>[ge.value,g.value,M.value],async([e,t,l],v,b)=>{var H,le,oe,ne;(v==null?void 0:v[0])!==e&&C.clear();let d=!1;if(b(()=>{d=!0}),!e)return;i.value=e.search(t).slice(0,16),U.value=!0;const s=l?await Promise.all(i.value.map(p=>we(p.id))):[];if(d)return;for(const{id:p,mod:S}of s){const L=p.slice(0,p.indexOf("#"));let k=C.get(L);if(k)continue;k=new Map,C.set(L,k);const y=S.default??S;if(y!=null&&y.render||y!=null&&y.setup){const D=je(y);D.config.warnHandler=()=>{},D.provide(Qe,V),Object.defineProperties(D.config.globalProperties,{$frontmatter:{get(){return V.frontmatter.value}},$params:{get(){return V.page.value.params}}});const re=document.createElement("div");D.mount(re),re.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(E=>{var ue;const O=(ue=E.querySelector("a"))==null?void 0:ue.getAttribute("href"),ie=(O==null?void 0:O.startsWith("#"))&&O.slice(1);if(!ie)return;let ce="";for(;(E=E.nextElementSibling)&&!/^h[1-6]$/i.test(E.tagName);)ce+=E.outerHTML;k.set(ie,ce)}),D.unmount()}if(d)return}const h=new Set;if(i.value=i.value.map(p=>{const[S,L]=p.id.split("#"),k=C.get(S),y=(k==null?void 0:k.get(L))??"";for(const D in p.match)h.add(D);return{...p,text:y}}),await I(),d)return;await new Promise(p=>{var S;(S=ee.value)==null||S.unmark({done:()=>{var L;(L=ee.value)==null||L.markRegExp(Se(h),{done:p})}})});const w=((H=z.value)==null?void 0:H.querySelectorAll(".result .excerpt"))??[];for(const p of w)(le=p.querySelector('mark[data-markjs="true"]'))==null||le.scrollIntoView({block:"center"});(ne=(oe=R.value)==null?void 0:oe.firstElementChild)==null||ne.scrollIntoView({block:"start"})},{debounce:200,immediate:!0});async function we(e){const t=Je(e.slice(0,e.indexOf("#")));try{if(!t)throw new Error(`Cannot find file for id: ${e}`);return{id:e,mod:await We(()=>import(t),[])}}catch(l){return console.error(l),{id:e,mod:{}}}}const j=A(),ye=F(()=>{var e;return((e=g.value)==null?void 0:e.length)<=0});function Q(e=!0){var t,l;(t=j.value)==null||t.focus(),e&&((l=j.value)==null||l.select())}X(()=>{Q()});function xe(e){e.pointerType==="mouse"&&Q()}const u=A(-1),$=A(!1);he(i,e=>{u.value=e.length?0:-1,J()});function J(){I(()=>{const e=document.querySelector(".result.selected");e&&e.scrollIntoView({block:"nearest"})})}N("ArrowUp",e=>{e.preventDefault(),u.value--,u.value<0&&(u.value=i.value.length-1),$.value=!0,J()}),N("ArrowDown",e=>{e.preventDefault(),u.value++,u.value>=i.value.length&&(u.value=0),$.value=!0,J()});const ke=Pe();N("Enter",e=>{if(e.isComposing||e.target instanceof HTMLButtonElement&&e.target.type!=="submit")return;const t=i.value[u.value];if(e.target instanceof HTMLInputElement&&!t){e.preventDefault();return}t&&(ke.go(t.id),r("close"))}),N("Escape",()=>{r("close")});const m=st({modal:{displayDetails:"Display detailed list",resetButtonTitle:"Reset search",backButtonTitle:"Close search",noResultsText:"No results for",footer:{selectText:"to select",selectKeyAriaLabel:"enter",navigateText:"to navigate",navigateUpKeyAriaLabel:"up arrow",navigateDownKeyAriaLabel:"down arrow",closeText:"to close",closeKeyAriaLabel:"escape"}}});X(()=>{window.history.pushState(null,"",null)}),Re("popstate",e=>{e.preventDefault(),r("close")});const te=Ve(Ce?document.body:null);X(()=>{I(()=>{te.value=!0,I().then(()=>be())})}),$e(()=>{te.value=!1});function Te(){g.value="",I().then(()=>Q(!1))}function Se(e){return new RegExp([...e].sort((t,l)=>l.length-t.length).map(t=>`(${Xe(t)})`).join("|"),"gi")}return(e,t)=>{var l,v,b,d;return x(),He(qe,{to:"body"},[a("div",{ref_key:"el",ref:z,role:"button","aria-owns":(l=i.value)!=null&&l.length?"localsearch-list":void 0,"aria-expanded":"true","aria-haspopup":"listbox","aria-labelledby":"localsearch-label",class:"VPLocalSearchBox"},[a("div",{class:"backdrop",onClick:t[0]||(t[0]=s=>e.$emit("close"))}),a("div",nt,[a("form",{class:"search-bar",onPointerup:t[4]||(t[4]=s=>xe(s)),onSubmit:t[5]||(t[5]=Oe(()=>{},["prevent"]))},[a("label",{title:Z.value,id:"localsearch-label",for:"localsearch-input"},ct,8,rt),a("div",ut,[a("button",{class:"back-button",title:n(m)("modal.backButtonTitle"),onClick:t[1]||(t[1]=s=>e.$emit("close"))},vt,8,dt)]),Ke(a("input",{ref_key:"searchInput",ref:j,"onUpdate:modelValue":t[2]||(t[2]=s=>Ne(g)?g.value=s:null),placeholder:Z.value,id:"localsearch-input","aria-labelledby":"localsearch-label",class:"search-input"},null,8,pt),[[Fe,n(g)]]),a("div",ft,[Y.value?q("",!0):(x(),T("button",{key:0,class:ve(["toggle-layout-button",{"detailed-list":n(M)}]),type:"button",title:n(m)("modal.displayDetails"),onClick:t[3]||(t[3]=s=>u.value>-1&&(M.value=!n(M)))},bt,10,mt)),a("button",{class:"clear-button",type:"reset",disabled:ye.value,title:n(m)("modal.resetButtonTitle"),onClick:Te},yt,8,gt)])],32),a("ul",{ref_key:"resultsEl",ref:R,id:(v=i.value)!=null&&v.length?"localsearch-list":void 0,role:(b=i.value)!=null&&b.length?"listbox":void 0,"aria-labelledby":(d=i.value)!=null&&d.length?"localsearch-label":void 0,class:"results",onMousemove:t[7]||(t[7]=s=>$.value=!1)},[(x(!0),T(fe,null,pe(i.value,(s,h)=>(x(),T("li",{key:s.id,role:"option","aria-selected":u.value===h?"true":"false"},[a("a",{href:s.id,class:ve(["result",{selected:u.value===h}]),"aria-label":[...s.titles,s.title].join(" > "),onMouseenter:w=>!$.value&&(u.value=h),onFocusin:w=>u.value=h,onClick:t[6]||(t[6]=w=>e.$emit("close"))},[a("div",null,[a("div",St,[Lt,(x(!0),T(fe,null,pe(s.titles,(w,H)=>(x(),T("span",{key:H,class:"title"},[a("span",{class:"text",innerHTML:w},null,8,Dt),Mt]))),128)),a("span",Et,[a("span",{class:"text",innerHTML:s.title},null,8,At)])]),n(M)?(x(),T("div",It,[s.text?(x(),T("div",Bt,[a("div",{class:"vp-doc",innerHTML:s.text},null,8,Pt)])):q("",!0),Rt,Vt])):q("",!0)])],42,Tt)],8,kt))),128)),n(g)&&!i.value.length&&U.value?(x(),T("li",Ct,[B(P(n(m)("modal.noResultsText"))+' "',1),a("strong",null,P(n(g)),1),B('" ')])):q("",!0)],40,xt),a("div",$t,[a("span",null,[a("kbd",{"aria-label":n(m)("modal.footer.navigateUpKeyAriaLabel")},Kt,8,Ht),a("kbd",{"aria-label":n(m)("modal.footer.navigateDownKeyAriaLabel")},qt,8,Ft),B(" "+P(n(m)("modal.footer.navigateText")),1)]),a("span",null,[a("kbd",{"aria-label":n(m)("modal.footer.selectKeyAriaLabel")},jt,8,zt),B(" "+P(n(m)("modal.footer.selectText")),1)]),a("span",null,[a("kbd",{"aria-label":n(m)("modal.footer.closeKeyAriaLabel")},"esc",8,Qt),B(" "+P(n(m)("modal.footer.closeText")),1)])])])],8,ot)])}}}),aa=Ge(Jt,[["__scopeId","data-v-43c4f204"]]);export{aa as default};
